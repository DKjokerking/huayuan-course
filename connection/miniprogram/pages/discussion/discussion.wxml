<!--pages/discussion/discussion.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨æ“ä½œæ  -->
  <view class="header">
    <picker 
      mode="selector" 
      range="{{courses}}" 
      range-key="name"
      bindchange="onCourseChange"
    >
      <view class="course-select">
        {{currentCourse ? courses[currentCourse].name : 'å…¨éƒ¨è¯¾ç¨‹'}}
        <text class="arrow">â–¼</text>
      </view>
    </picker>
    
    <button class="publish-btn" bindtap="goToPublish">
      å‘å¸–
    </button>
  </view>

  <!-- å¸–å­åˆ—è¡¨ -->
  <view class="post-list">
    <view 
      class="post-item" 
      wx:for="{{postList}}" 
      wx:key="_id"
      bindtap="goToDetail"
      data-id="{{item._id}}"
    >
      <view class="post-header">
        <image class="avatar" src="{{item.avatarUrl}}"></image>
        <text class="nickname">{{item.nickname}}</text>
        <text class="time">{{item.createTime}}</text>
      </view>
      
      <view class="post-content">
        <view class="title">{{item.title}}</view>
        <view class="content">{{item.content}}</view>
      </view>
      
      <view class="post-footer">
        <view class="stat-item">
          <text class="icon">ğŸ‘ï¸</text>
          <text>{{item.views}}</text>
        </view>
        <view class="stat-item">
          <text class="icon">ğŸ’¬</text>
          <text>{{item.comments}}</text>
        </view>
        <view class="stat-item">
          <text class="icon">ğŸ‘</text>
          <text>{{item.likes}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">åŠ è½½ä¸­...</view>
  <view class="no-more" wx:if="{{!hasMore && postList.length > 0}}">
    æ²¡æœ‰æ›´å¤šäº†
  </view>
  <view class="empty" wx:if="{{!loading && postList.length === 0}}">
    æš‚æ— å¸–å­
  </view>
</view>