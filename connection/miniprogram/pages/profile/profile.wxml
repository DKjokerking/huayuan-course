<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- 用户基本信息 -->
  <view class="user-header">
    <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.jpeg'}}"></image>
    <view class="nickname">{{userInfo.nickname || '未设置昵称'}}</view>
    <button class="edit-btn" bindtap="toggleEdit">
      {{isEditing ? '取消' : '编辑资料'}}
    </button>
  </view>

  <!-- 信息展示/编辑区域 -->
  <view class="info-section">
    <block wx:if="{{!isEditing}}">
      <view class="info-item">
        <text class="label">学号</text>
        <text class="value">{{userInfo.studentId || '未设置'}}</text>
      </view>
      <view class="info-item">
        <text class="label">专业</text>
        <text class="value">{{userInfo.major || '未设置'}}</text>
      </view>
      <view class="info-item">
        <text class="label">年级</text>
        <text class="value">{{userInfo.grade || '未设置'}}</text>
      </view>
      <view class="info-item">
        <text class="label">个人简介</text>
        <text class="value">{{userInfo.bio || '未设置'}}</text>
      </view>
      <view class="info-item">
        <text class="label">联系方式</text>
        <text class="value">{{userInfo.contactInfo || '未设置'}}</text>
      </view>
    </block>

    <block wx:else>
      <view class="form-item">
        <text class="label">昵称</text>
        <input 
          class="input" 
          value="{{formData.nickname}}"
          data-field="nickname"
          bindinput="onInput"
          placeholder="请输入昵称"
        />
      </view>
      <view class="form-item">
        <text class="label">学号</text>
        <input 
          class="input" 
          value="{{formData.studentId}}"
          data-field="studentId"
          bindinput="onInput"
          placeholder="请输入学号"
        />
      </view>
      <view class="form-item">
        <text class="label">专业</text>
        <input 
          class="input" 
          value="{{formData.major}}"
          data-field="major"
          bindinput="onInput"
          placeholder="请输入专业"
        />
      </view>
      <view class="form-item">
        <text class="label">年级</text>
        <input 
          class="input" 
          value="{{formData.grade}}"
          data-field="grade"
          bindinput="onInput"
          placeholder="请输入年级"
        />
      </view>
      <view class="form-item">
        <text class="label">个人简介</text>
        <textarea 
          class="textarea" 
          value="{{formData.bio}}"
          data-field="bio"
          bindinput="onInput"
          placeholder="请输入个人简介"
        />
      </view>
      <view class="form-item">
        <text class="label">联系方式</text>
        <input 
          class="input" 
          value="{{formData.contactInfo}}"
          data-field="contactInfo"
          bindinput="onInput"
          placeholder="请输入联系方式"
        />
      </view>

      <button class="submit-btn" bindtap="submitUpdate">保存</button>
    </block>
  </view>
</view>